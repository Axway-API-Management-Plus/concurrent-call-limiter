<entityStoreData xmlns="http://www.vordel.com/2005/06/24/entityStore">
<metaInfo flags="138">
	<exportRoots>
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
			</key>
		</key>
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
			</key>
		</key>
		<key type='CacheManager'>
			<id field='name' value='Cache Manager'/>
			<key type='Cache'>
				<id field='name' value='MaxParallelRequestsCache'/>
			</key>
		</key>
		<key type='ESConfiguration'>
			<id field='name' value='Entity Store Configuration'/>
		</key>
	</exportRoots>
	<typeVersions>
		<type name="Cache" version="0"/>
		<type name="CacheAttributeFilter" version="1"/>
		<type name="CacheManager" version="2"/>
		<type name="ChangeMessageFilter" version="0"/>
		<type name="CircuitContainer" version="1"/>
		<type name="ConversionFilter" version="0"/>
		<type name="ESConfiguration" version="21"/>
		<type name="Entity" version="0"/>
		<type name="FalseFilter" version="0"/>
		<type name="Filter" version="5"/>
		<type name="FilterCircuit" version="4"/>
		<type name="IsCachedAttributeFilter" version="1"/>
		<type name="JavaScriptFilter" version="3"/>
		<type name="LoadableModule" version="2"/>
		<type name="NamedLoadableModule" version="0"/>
		<type name="Reflector" version="0"/>
		<type name="RootChild" version="0"/>
		<type name="SelectorFilter" version="1"/>
		<type name="SetAttributeFilter" version="0"/>
		<type name="SetHTTPStatusCode" version="0"/>
		<type name="SetResponseStatusFilter" version="0"/>
		<type name="TraceFilter" version="3"/>
		<type name="TrueFilter" version="0"/>
	</typeVersions>
	<realizedTypes><![CDATA[
<entityStoreData>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="RootChild"/>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="RootChild" name="LoadableModule">
        <constant name="_version" type="integer" value="2"/>
        <constant name="loadorder" type="integer" value="1000000"/>
        <field cardinality="?" name="classloader" type="^ClassLoader"/>

        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="LoadableModule" name="NamedLoadableModule">
        <constant name="_version" type="integer" value="0"/>
		<field cardinality="1" isKey="true" name="name" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="NamedLoadableModule" name="CacheManager">
            <constant name="_version" type="integer" value="2"/>
            <constant name="class" type="string" value="com.vordel.circuit.cache.CacheContainer"/>
            <constant name="loadorder" type="integer" value="1"/>
            <componentType cardinality="*" name="Cache"/>
        </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="ESConfiguration">
        <constant name="_version" type="integer" value="21"/>
        <!--
            Give this singleton a key.
        -->
        <field isKey="true" name="name" type="string"/>
        <!-- 
            We use this field to verify that the passphrase for the 
            encryped data is synchronized between the server and client, and
            between multiple invocations of the client
        -->
        <field name="passphraseTest" type="encrypted"/>
        <field name="version" type="string"/>
        <!-- The product key should never change for the lifetime of the product -->
        <field name="productKey" type="string"/>
        <field cardinality="?" name="gitrev" type="string"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="CircuitContainer">
    <constant name="_version" type="integer" value="1"/>
    <componentType cardinality="*" name="FilterCircuit"/>
    <componentType cardinality="*" name="CircuitContainer"/>
    <componentType cardinality="*" name="MVProperty"/>
    <field isKey="true" name="name" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="RootChild" name="FilterCircuit">
        <constant name="_version" type="integer" value="4"/>
		<componentType cardinality="*" name="Filter"/>
		<componentType cardinality="1" name="BoundCircuit"/>
		<componentType cardinality="*" name="Property"/>
		<field cardinality="1" name="start" type="@Filter"/>
		<field cardinality="?" name="fault" type="@Filter"/>
		<field isKey="true" name="name" type="string"/>
		<field cardinality="1" default="3" name="logMask" type="integer"/>

		<field cardinality="?" name="description" type="string"/>		
		<field cardinality="1" name="category" type="@PolicyCategory">
            <defaultRef>
                <key type="PolicyCategoryGroup">
                  <id field="name" value="Policy Categories"/>
                  <key type="PolicyCategory">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Entity" name="Cache">
        <constant name="_version" type="integer" value="0"/>
    <!-- required -->
    <field isKey="true" name="name" type="string"/>
    <field cardinality="1" default="1000" name="maxElementsInMemory" type="integer"/>
    <field cardinality="1" default="1000" name="maxElementsOnDisk" type="integer"/>
    <field cardinality="1" default="true" name="eternal" type="boolean"/>
    <field cardinality="1" default="true" name="overflowToDisk" type="boolean"/>
    <!-- optional -->
    <field cardinality="1" default="0" name="timeToIdleSeconds" type="long"/>
    <field cardinality="1" default="0" name="timeToLiveSeconds" type="long"/>
    <field cardinality="1" default="false" name="diskPersistent" type="boolean"/>
    <field cardinality="1" default="120" name="diskExpiryThreadIntervalSeconds" type="long"/>    
    <field cardinality="1" default="30" name="diskSpoolBufferSizeMB" type="integer"/>
    <field cardinality="1" default="LRU" name="memoryStoreEvictionPolicy" type="string"/>
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Entity" name="Filter">
        <constant name="_version" type="integer" value="5"/>
        <field cardinality="?" name="successNode" type="@Filter"/>
        <field cardinality="?" name="failureNode" type="@Filter"/>
        <field isKey="true" name="name" type="string"/>
        <field cardinality="1" default="2" name="logMask" type="integer"/>
        <field cardinality="1" default="Filter aborted due to exception" name="logFatal" type="string"/>
        <field cardinality="1" default="Filter failed" name="logFailure" type="string"/>
        <field cardinality="1" default="Filter passed" name="logSuccess" type="string"/>
        <field cardinality="1" name="category" type="@Category">
            <defaultRef>
                <key type="CategoryGroup">
                  <id field="name" value="Filter Categories"/>
                  <key type="Category">
                      <id field="name" value="miscellaneous"/>
                  </key>
                </key>
            </defaultRef>
        </field>
      <field cardinality="1" default="0" name="abortProcessingOnLogError" type="boolean"/>
      <field cardinality="1" default="SERVICE" name="logMaskType" type="string"/>
      <field cardinality="*" name="classloader" type="^ClassLoader"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SetAttributeFilter">
        <constant name="_version" type="integer" value="0"/>
  
    <!-- Name of the Filter class that encapsulates this configuration entity -->
    <constant name="class" type="string" value="com.vordel.circuit.attribute.SetAttributeFilter"/>
    
    <!-- List of the configuration parameters, their types, and their default values -->
    <field cardinality="1" default="" name="messageAttribute" type="string"/>	
    <field cardinality="1" default="" name="attributeValue" type="string"/>	
  </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="CacheAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.CacheAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="IsCachedAttributeFilter">
        <constant name="_version" type="integer" value="1"/>	    
	    <constant name="class" type="string" value="com.vordel.circuit.cache.IsCachedAttributeFilter"/>
        <field cardinality="1" name="cacheToUse" type="^Cache"/>
	    <field cardinality="1" default="message.key" name="keyAttributeName" type="string"/>
		<field cardinality="1" default="content.body" name="attributeName" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="TrueFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.basic.True"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SelectorFilter">
        <constant name="_version" type="integer" value="1"/>
            <constant name="class" type="string" value="com.vordel.circuit.basic.SelectorFilter"/>
            <field cardinality="1" default="${1 + 1 == 2}" name="expression" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" abstract="true" extends="Filter" name="ConversionFilter">
        <constant name="_version" type="integer" value="0"/>
		<field cardinality="?" name="outputContentType" type="string"/> 
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="ConversionFilter" name="ChangeMessageFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.conversion.ChangeMessageFilter"/>
		<field cardinality="1" default="" name="body" type="string"/>	
         </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="JavaScriptFilter">
        <constant name="_version" type="integer" value="3"/>
	<constant name="class" type="string" value="com.vordel.circuit.script.ScriptFilter"/>
	<field cardinality="1" default="function invoke(msg)         {            return true;         }" name="script" type="string"/>
	<field cardinality="1" default="nashorn" name="engineName" type="string"/>
        <field cardinality="*" name="requiredProperties" type="string"/>
        <field cardinality="*" name="generatedProperties" type="string"/>
        <field cardinality="*" name="consumedProperties" type="string"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SetHTTPStatusCode">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.net.SetHTTPStatusFilter"/>
        <field cardinality="1" default="200" name="httpResponseStatus" type="integer"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="SetHTTPStatusCode" name="Reflector">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.net.ReflectFilter"/>
	</entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="SetResponseStatusFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.basic.SetResponseStatusFilter"/>                    
        <field cardinality="1" default="2" name="responseStatus" type="integer"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="TraceFilter">
        <constant name="_version" type="integer" value="3"/>
		    <constant name="class" type="string" value="com.vordel.circuit.basic.TraceFilter"/>
        <field cardinality="?" name="traceMsg" type="string"/>
        <field cardinality="1" default="5" name="traceLevel" type="integer"/>
        <field cardinality="1" default="1" name="traceAttributes" type="boolean"/>
        <field cardinality="1" default="0" name="traceBody" type="boolean"/>
        <field cardinality="1" default="0" name="doIndent" type="boolean"/>
    </entityType>
<entityType xmlns="http://www.vordel.com/2005/06/24/entityStore" extends="Filter" name="FalseFilter">
        <constant name="_version" type="integer" value="0"/>
		<constant name="class" type="string" value="com.vordel.circuit.basic.False"/>
	</entityType>
</entityStoreData>
	]]></realizedTypes>
</metaInfo>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FilterCircuit">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
	</key>
	<fval name="category"><value contentType="reference">
		<key type='PolicyCategoryGroup'>
			<id field='name' value='Policy Categories'/>
			<key type='PolicyCategory'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="description"><value>Enforce only max. parallel (concurrent) API calls towards same backend service operation</value></fval>
	<fval name="logMask"><value>3</value></fval>
	<fval name="name"><value>MaxConcurrentApiRequestsResponsePolicy</value></fval>
	<fval name="start"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='IsCachedAttributeFilter'>
					<id field='name' value='Read counter from cache'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CacheAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>cache.inflight.requests</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='MaxParallelRequestsCache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='OK for API Manager Processing'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>api.id</value></fval>
	<fval name="logFailure"><value>Failed to cache the message attribute.</value></fval>
	<fval name="logFatal"><value>Error while caching the message attribute. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Cached the message attribute.</value></fval>
	<fval name="name"><value>Cache decremented Inflight Request Counter</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='OK for API Manager'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>OK for API Manager Processing</value></fval>
	<fval name="successNode"><value contentType="reference">-1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: no counter available</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='OK for API Manager'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: no counter to decrement for api=&quot;${api.name}&quot;, API_ID=&quot;${api.id}&quot; [request.id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>OK for API Manager</value></fval>
	<fval name="successNode"><value contentType="reference">-1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: counter value after back-end call</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='CacheAttributeFilter'>
					<id field='name' value='Cache decremented Inflight Request Counter'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: decremented counter for API=&quot;${api.name}&quot; and API_ID=&quot;${api.id}&quot; to VALUE=${cache.inflight.requests} [request-id: ${id}]&#xD;&#xA;</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${cache.inflight.requests &gt; 0? cache.inflight.requests - 1 : 0}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>cache.inflight.requests</value></fval>
	<fval name="name"><value>Decrement Inflight Request Count</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: counter value after back-end call'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>Nothing cached - nothing to do</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: no counter available'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="IsCachedAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>cache.inflight.requests</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='MaxParallelRequestsCache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='Nothing cached - nothing to do'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>api.id</value></fval>
	<fval name="logFailure"><value>Failure while looking for key in the message attribute cache.</value></fval>
	<fval name="logFatal"><value>Error while looking for key in the  message attribiute cache. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>0</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Found the key in the message attribute cache.</value></fval>
	<fval name="name"><value>Read counter from cache</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsResponsePolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Decrement Inflight Request Count'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CircuitContainer">
	<fval name="name"><value>Plattform Protection Tools</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FilterCircuit">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
	</key>
	<fval name="category"><value contentType="reference">
		<key type='PolicyCategoryGroup'>
			<id field='name' value='Policy Categories'/>
			<key type='PolicyCategory'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="description"><value>Enforce only max. parallel (concurrent) API calls towards same backend service operation</value></fval>
	<fval name="logMask"><value>3</value></fval>
	<fval name="name"><value>MaxConcurrentApiRequestsRequestPolicy</value></fval>
	<fval name="start"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Set API-Method Limit Lookup Key'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>OK for API Manager Processing</value></fval>
	<fval name="successNode"><value contentType="reference">-1</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetResponseStatusFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the response status</value></fval>
	<fval name="logFatal"><value>SetResponseStatusFilter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully set the response status</value></fval>
	<fval name="name"><value>Set Response Status to Fail</value></fval>
	<fval name="responseStatus"><value>3</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='FalseFilter'>
					<id field='name' value='STOP for API Manager Processing'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Nothing cached - create new entry</value></fval>
	<fval name="name"><value>Nothing cached - create new entry</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: start new counter'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SelectorFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="expression"><value>${max.inflight.requests.isEmpty()}</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='IsCachedAttributeFilter'>
					<id field='name' value='Get Inflight requests'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Using concurrency limit: ${max.inflight.requests}</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>No global default configured</value></fval>
	<fval name="name"><value>No API Default Limit found?</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Init Default API Limit'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${kps.apiLimit[limit.lookup.key].concurrencyLimit}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>API limit from KPS: ${max.inflight.requests}</value></fval>
	<fval name="messageAttribute"><value>max.inflight.requests</value></fval>
	<fval name="name"><value>Read API-Method Limit from KPS</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SelectorFilter'>
					<id field='name' value='No API-Method Limit configured?'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SelectorFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="expression"><value>${max.inflight.requests.isEmpty()}</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='IsCachedAttributeFilter'>
					<id field='name' value='Get Inflight requests'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Using concurrency limit: ${max.inflight.requests}</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>No API-Method limit found - looking for general API limit</value></fval>
	<fval name="name"><value>No API-Method Limit configured?</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Set API Limit Lookup Key'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="IsCachedAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>cache.inflight.requests</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='MaxParallelRequestsCache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='Nothing cached - create new entry'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>api.id</value></fval>
	<fval name="logFailure"><value>No inflight requests found - starting new counter</value></fval>
	<fval name="logFatal"><value>Error while looking for key in the  message attribiute cache. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Actual inflight request ${cache.inflight.requests}</value></fval>
	<fval name="name"><value>Get Inflight requests</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='JavaScriptFilter'>
					<id field='name' value='Check if max inflight limit is exceeded'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="JavaScriptFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="consumedProperties"></fval>
	<fval name="engineName"><value>groovy</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='Threshold reached'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="generatedProperties"></fval>
	<fval name="logFailure"><value>Cached request: ${cache.inflight.requests} &lt; Max : ${max.inflight.requests} is failed</value></fval>
	<fval name="logFatal"><value>Error while attempt to run script filter. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Cached request: ${cache.inflight.requests} &lt; Max : ${max.inflight.requests} is passed</value></fval>
	<fval name="name"><value>Check if max inflight limit is exceeded</value></fval>
	<fval name="requiredProperties"></fval>
	<fval name="script"><value>def invoke(msg) &#xD;&#xA;{ &#xD;&#xA;    def cachedRequests= msg.get(&quot;cache.inflight.requests&quot;) as Integer;&#xD;&#xA;    def maxRequests = msg.get(&quot;max.inflight.requests&quot;) as Integer;&#xD;&#xA;&#xD;&#xA;    if (cachedRequests &lt; maxRequests){&#xD;&#xA;        return true;&#xD;&#xA;&#x9;}&#xD;&#xA;&#xD;&#xA;    return false;         &#xD;&#xA;}</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Increment Inflight Request Count'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: start new counter</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Start Inflight Request Count'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>3</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: start new counter for api=&quot;${api.name}&quot;, API_ID=&quot;${api.id}&quot; (limit=${max.inflight.requests}) [request.id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: Error concurrency level reached</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='ChangeMessageFilter'>
					<id field='name' value='Create JSON client error message'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: threshold reached for api=&quot;${api.name}&quot;, API_ID=&quot;${api.id}&quot; (counter=${cache.inflight.requests} of limit=${max.inflight.requests}) [request.id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${api.path}${api.method.path}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Lookup key for concurrency set to &apos;${limit.lookup.key}&apos;</value></fval>
	<fval name="messageAttribute"><value>limit.lookup.key</value></fval>
	<fval name="name"><value>Set API-Method Limit Lookup Key</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Read API-Method Limit from KPS'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ChangeMessageFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="body"><value>{ &quot;error&quot; : &quot;to many requests&quot;, &quot;message&quot; : &quot;please try again later&quot; }</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed in setting the message</value></fval>
	<fval name="logFatal"><value>Error in setting the message. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Success in setting the message</value></fval>
	<fval name="name"><value>Create JSON client error message</value></fval>
	<fval name="outputContentType"><value>application/json</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='Reflector'>
					<id field='name' value='Simulate HTTP error status'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: User request blocked</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: Error concurrency level reached'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: Request blocked for APP=&quot;${authentication.application.name}&quot; within ORG=&quot;${authentication.organization.name}&quot;! (request client is ${http.request.hostname}) [request-id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="Reflector">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="httpResponseStatus"><value>429</value></fval>
	<fval name="logFailure"><value>Failed to echo back the message</value></fval>
	<fval name="logFatal"><value>Error occurred while echoing the message. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Successfully echoed back the message</value></fval>
	<fval name="name"><value>Simulate HTTP error status</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetResponseStatusFilter'>
					<id field='name' value='Set Response Status to Fail'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: Counter value before routing</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='CacheAttributeFilter'>
					<id field='name' value='Cache incremented Inflight Request Counter'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: incrementing counter for API=&quot;${api.name}&quot; and API_ID=&quot;${api.id}&quot; to VALUE=${cache.inflight.requests} [request-id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${cache.inflight.requests + 1}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>cache.inflight.requests</value></fval>
	<fval name="name"><value>Increment Inflight Request Count</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: Quota User Info'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${kps.apiLimit[&quot;default&quot;].concurrencyLimit}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Read default limit from KPS : ${max.inflight.requests}</value></fval>
	<fval name="messageAttribute"><value>max.inflight.requests</value></fval>
	<fval name="name"><value>Read API Default Limit from KPS</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SelectorFilter'>
					<id field='name' value='No API Default Limit found?'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TrueFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value></value></fval>
	<fval name="logFatal"><value>True filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>True filter passed</value></fval>
	<fval name="name"><value>Threshold reached</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: User request blocked'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CacheAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeName"><value>cache.inflight.requests</value></fval>
	<fval name="cacheToUse"><value contentType="reference">
<key type='CacheManager'><id field='name' value='Cache Manager'/><key type='Cache'><id field='name' value='MaxParallelRequestsCache'/></key></key>	</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="keyAttributeName"><value>api.id</value></fval>
	<fval name="logFailure"><value>Failed to cache the message attribute.</value></fval>
	<fval name="logFatal"><value>Error while caching the message attribute. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Cached the message attribute.</value></fval>
	<fval name="name"><value>Cache incremented Inflight Request Counter</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TrueFilter'>
					<id field='name' value='OK for API Manager Processing'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>1</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Set the attribute value</value></fval>
	<fval name="messageAttribute"><value>cache.inflight.requests</value></fval>
	<fval name="name"><value>Start Inflight Request Count</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: Quota User Info'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>100</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Global default limit: ${max.inflight.requests}</value></fval>
	<fval name="messageAttribute"><value>max.inflight.requests</value></fval>
	<fval name="name"><value>Init Default API Limit</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='IsCachedAttributeFilter'>
					<id field='name' value='Get Inflight requests'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="FalseFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Filter failed</value></fval>
	<fval name="logFatal"><value>False filter error. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>0</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value></value></fval>
	<fval name="name"><value>STOP for API Manager Processing</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="TraceFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="doIndent"><value>0</value></fval>
	<fval name="logFailure"><value>Failed to trace the message properties</value></fval>
	<fval name="logFatal"><value>Error while tracing the message properties. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>SERVICE</value></fval>
	<fval name="logSuccess"><value>Traced the message properties</value></fval>
	<fval name="name"><value>Trace: Quota User Info</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='TraceFilter'>
					<id field='name' value='Trace: Counter value before routing'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="traceAttributes"><value>0</value></fval>
	<fval name="traceBody"><value>0</value></fval>
	<fval name="traceLevel"><value>5</value></fval>
	<fval name="traceMsg"><value>API CONCURRENCY LIMIT: client=${http.request.hostname} is calling APP=&quot;${authentication.application.name}&quot; within ORG=&quot;${authentication.organization.name}&quot; for API=&quot;${api.name}&quot; and API_ID=&quot;${api.id}&quot; [request-id: ${id}]</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${api.path}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>Lookup key for concurrency set to &apos;${limit.lookup.key}&apos;</value></fval>
	<fval name="messageAttribute"><value>limit.lookup.key</value></fval>
	<fval name="name"><value>Set API Limit Lookup Key</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Read API Limit from KPS'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SetAttributeFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="attributeValue"><value>${kps.apiLimit[limit.lookup.key].concurrencyLimit}</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Failed to set the attribute value</value></fval>
	<fval name="logFatal"><value>Error while setting the attribute value. Error: ${circuit.exception}</value></fval>
	<fval name="logMask"><value>6</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>API limit from KPS: ${max.inflight.requests}</value></fval>
	<fval name="messageAttribute"><value>max.inflight.requests</value></fval>
	<fval name="name"><value>Read API Limit from KPS</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SelectorFilter'>
					<id field='name' value='No API Limit configured?'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="SelectorFilter">
	<key type='CircuitContainer'>
		<id field='name' value='Plattform Protection Tools'/>
		<key type='FilterCircuit'>
			<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
		</key>
	</key>
	<fval name="abortProcessingOnLogError"><value>0</value></fval>
	<fval name="category"><value contentType="reference">
		<key type='CategoryGroup'>
			<id field='name' value='Filter Categories'/>
			<key type='Category'>
				<id field='name' value='miscellaneous'/>
			</key>
		</key>
	</value></fval>
	<fval name="expression"><value>${max.inflight.requests.isEmpty()}</value></fval>
	<fval name="failureNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='IsCachedAttributeFilter'>
					<id field='name' value='Get Inflight requests'/>
				</key>
			</key>
		</key>
	</value></fval>
	<fval name="logFailure"><value>Using concurrency limit: ${max.inflight.requests}</value></fval>
	<fval name="logFatal"><value>Filter aborted due to exception</value></fval>
	<fval name="logMask"><value>2</value></fval>
	<fval name="logMaskType"><value>FILTER</value></fval>
	<fval name="logSuccess"><value>No generic API limit found - looking for defalt value next</value></fval>
	<fval name="name"><value>No API Limit configured?</value></fval>
	<fval name="successNode"><value contentType="reference">
		<key type='CircuitContainer'>
			<id field='name' value='Plattform Protection Tools'/>
			<key type='FilterCircuit'>
				<id field='name' value='MaxConcurrentApiRequestsRequestPolicy'/>
				<key type='SetAttributeFilter'>
					<id field='name' value='Read API Default Limit from KPS'/>
				</key>
			</key>
		</key>
	</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="Cache">
	<key type='CacheManager'>
		<id field='name' value='Cache Manager'/>
	</key>
	<fval name="diskExpiryThreadIntervalSeconds"><value>120</value></fval>
	<fval name="diskPersistent"><value>1</value></fval>
	<fval name="diskSpoolBufferSizeMB"><value>30</value></fval>
	<fval name="eternal"><value>0</value></fval>
	<fval name="maxElementsInMemory"><value>5000</value></fval>
	<fval name="maxElementsOnDisk"><value>5000</value></fval>
	<fval name="memoryStoreEvictionPolicy"><value>LRU</value></fval>
	<fval name="name"><value>MaxParallelRequestsCache</value></fval>
	<fval name="overflowToDisk"><value>1</value></fval>
	<fval name="timeToIdleSeconds"><value>60</value></fval>
	<fval name="timeToLiveSeconds"><value>300</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="CacheManager">
	<fval name="name"><value>Cache Manager</value></fval>
</entity>
<entity xmlns="http://www.vordel.com/2005/06/24/entityStore"  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" type="ESConfiguration">
	<fval name="name"><value>Entity Store Configuration</value></fval>
	<fval name="passphraseTest"><value>aHR0cDsvL3d3dy52b3JkZWwuY29t</value></fval>
	<fval name="productKey"><value>VordelGateway</value></fval>
	<fval name="version"><value>7.5.3</value></fval>
</entity>
</entityStoreData>